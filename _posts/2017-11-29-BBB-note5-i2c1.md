---
layout: post
title: "BBB Notebook 6 IIC使用"
tagline: " BBB Notebook 6 "
categories: beagleboard-black
author: "Hu Tianyun"
meta: "Springfield"
---

# beagleboard black 笔记 <6>
我使用的是之前做小四轴剩下的 MPU6050 ，它和 HMC5883 焊在一起的，因为IIC 使用的是总线形式，所以不影响，反而可以测试一下多个传感器下的 IIC 功能。我先使用IIC读取 MPU6050 数据。

# 开始使用 IIC

## 开启 IIC 传输
与串口操作类似，添加覆盖层，【改变 IO 口属性】

### 操作步骤
	root@beaglebone:/lib/firmware# echo BB-I2C1 > $SLOTS  &
	[1] 1585

	root@beaglebone:/lib/firmware# cd /sys/devices/platform/ocp/
	root@beaglebone:/sys/devices/platform/ocp# config-pin -l P9.17
	default gpio gpio_pu gpio_pd spi_cs i2c pwm pru_uart

	root@beaglebone:/sys/devices/platform/ocp# cat ocp:P9_17_pinmux/state
	default
	root@beaglebone:/sys/devices/platform/ocp# config-pin P9.17 i2c
	root@beaglebone:/sys/devices/platform/ocp# config-pin P9.18 i2c

	root@beaglebone:/sys/devices/platform/ocp# cat ocp:P9_17_pinmux/state
	i2c
	root@beaglebone:/sys/devices/platform/ocp# cat ocp:P9_18_pinmux/state
	i2c

	

## 使用 Linux I2C 工具，测试 IIC 连接
### 检测总线上连接设备的地址

	i2cdetect -y -r 1

![mpu-origindata](/post_img/BBB-img/mpu-origindata.png  "mpu-origindata")

### 检测MPU6050 地址
	i2cget -y 1 0x68 0x75
	0x68

### 设置MPU6050 电源管理值

	i2cset -y 1 0x68 0x6B 0x00　//电源管理，典型值：0x00(正常启用)

### 读取MPU6050 数据
![mpu-origindata](/post_img/BBB-img/mpu-origindata.png  "mpu-origindata")
